<!-- sldsValidatorIgnore -->
<!--
  @description       : 
  @author            : tom.h.ansley@medtronic.com
  @group             : 
  @last modified on  : 07-31-2021
  @last modified by  : tom.h.ansley@medtronic.com
  Modifications Log 
  Ver   Date         Author                       Modification
  1.0   08-18-2020   tom.h.ansley@medtronic.com   Initial Version
  2.0   06-23-2021   tom.h.ansley@medtronic.com   Changes to Feature Overview verbage
  3.0   07-28-2021   tom.h.ansley@medtronic.com   Changed all strings to labels.
-->
<template>

    <template if:true={spinner}>
        <lightning-spinner alternative-text="Processing"></lightning-spinner>
    </template>

    <!-- ------------------------------------------------------------------------ -->
    <!-- Section which handles the initialization of the list views if its needed -->
    <!-- ------------------------------------------------------------------------ -->
    <lightning-card>
        <template if:false={showProgress}>
            <lightning-layout>
                <lightning-layout-item alignment-bump="right" flexibility="grow" padding="horizontal-small">
                    <div style="padding-left: 10px;">
                        <template if:false={isInitialized}>
                            <lightning-icon icon-name="standard:first_non_empty" 
                                            alternative-text={label.Not_Initialized} 
                                            title={label.Not_Initialized}>
                            </lightning-icon>&nbsp;&nbsp;
                            {label.List_Views_Need_Initialized}  
                        </template>
                        <template if:true={isInitialized}>    
                            <lightning-icon icon-name="standard:task2" 
                                            alternative-text={label.List_Views_Initialized} 
                                            title={label.List_Views_Initialized} >
                            </lightning-icon>&nbsp;&nbsp;
                            {label.List_Views_Initialized}  
                        </template>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item padding="horizontal-small" >
                        <lightning-button variant="brand" label={label.Refresh} title={label.Refresh_List_Views} icon-name="action:new_task" class="slds-m-left_x-small" onclick={handleProcessListViewsButtonClick}></lightning-button>
                    </lightning-layout-item>
            </lightning-layout>
        </template>
        <template if:true={showProgress}>
            <c-simpli-u-i-list-views-init-progress-bar batch-id={batchId}
                                                        working-text={label.Processing_Status}
                                                        complete-text={label.List_View_Processing_Complete}>
            </c-simpli-u-i-list-views-init-progress-bar>
        </template>
    </lightning-card>
    
    <br/>

    <lightning-card title={label.Feature_Overview} icon-name="standard:announcement">
        <div class="slds-var-m-around_medium">
            <div style="padding-left: 20px;">
                <ol style="list-style-type:circle; list-style-position: inside;">
                    <li style="padding-bottom: 5px;">List views for all objects on one page</li>
                    <li style="padding-bottom: 5px;">Lists up to 2500 records allowed</li>
                    <li style="padding-bottom: 5px;">Include any field in list view</li>
                    <li style="padding-bottom: 5px;">Create list views based on complex SOQL query's and tooling API queries</li>
                    <li style="padding-bottom: 5px;">Create list view actions</li>
                    <li style="padding-bottom: 5px;">Inline editing</li>
                    <li style="padding-bottom: 5px;">Pin your favorite list view</li>
                    <li style="padding-bottom: 5px;">Multiple column sorting</li>
                    <li style="padding-bottom: 5px;">Footer calculations</li>
                    <li style="padding-bottom: 5px;">Row highlighting based on criteria</li>
                    <li style="padding-bottom: 5px;">Auto-refresh at configured intervals</li>
                    <li style="padding-bottom: 5px;">Export list view data with the click of a button</li>
                    <li style="padding-bottom: 5px;">Include deleted records in list view (records show in red)</li>
                    <li style="padding-bottom: 5px;">Configure the list view page at the org, page and list view level</li>
                </ol>
            </div>
        </div>
    </lightning-card>
    <br/>
    <lightning-card title={label.Quick_Start} icon-name="standard:custom_notification">
        <div class="slds-var-m-around_medium">
            <div style="padding-left: 20px;">
                <ol style="list-style-type:decimal; list-style-position: inside;">
                    <li style="padding-bottom: 5px;"><b>Initialize List Views - </b>Click the refresh button above to process the list views if they have not been initialized.</li>
                    <li style="padding-bottom: 5px;"><b>Refresh Page - </b>After initializing, refresh the page to cache the new data.</li>
                    <li style="padding-bottom: 5px;"><b>Go To Simpli List Views Example Tab - </b>Click on the "Everything Example" tab. The objects and list views will be displayed.</li>
                </ol>
            </div>
        </div>
    </lightning-card>
    <br/>
    <lightning-card title={label.Issues_And_Questions} icon-name="standard:custom_notification">
        <div class="slds-var-m-around_medium">
            <p>If you have any issues, questions or ideas please go to the <a target="_blank" href="https://github.com/tomansley/SimpliListViews">github repository</a> to log them - </p>
            <br/>
            <p>Other resources which might be of interest - </p>
            <br/>
            <div style="padding-left: 20px;">
                <ol style="list-style-type:circle; list-style-position: inside;">
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=deoNfudkpEw">Features Overview (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=PIzyrWuc1YA">Install Guide (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=bJQchWEK34I">Starting Out (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=Uqur5RiKwU0">Sizing and Sorting (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=nJyTWEPCUac">Using Multiple Components On One Page (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=OLLpIvXqfWc">Creating Custom List View (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=9eHD7ntFFs0">Large Datasets and Paging (Video)</a></li>
                </ol>
            </div>
        </div>
    </lightning-card>
    <br/>
    <lightning-card title={label.Configuration} icon-name="standard:settings">
        <div class="slds-var-m-around_medium">

            <p>There are 3 different levels of configuration that are available.</p>
            <br/>
            <div style="padding-left: 20px;">
                <ol style="list-style-type:circle; list-style-position: inside;">
                    <li style="padding-bottom: 5px;">Org-wide custom settings</li>
                    <li style="padding-bottom: 5px;">Component or page level settings</li>
                    <li style="padding-bottom: 5px;">List view configuration</li>
                </ol>
            </div>
            <br/>
            <div>
                <b>Org-Wide Custom Settings</b>
                <br/><br/>
                <p>These settings are maintained in the List View Config tab. Look for the list view config with Object = 'All' and API Name = 'All'. They affect all list views displayed in the SFDC org and are typically set by a system administrator at initial setup.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li style="padding-bottom: 5px;"><b>Included Object Types - </b>Indicates only those object types that should be included in the object drop down on the list view component. This is a comma-seperated list of object API names. Note that if this value is blank ALL object types are included by default.</li>
                        <li style="padding-bottom: 5px;"><b>Excluded Object Types - </b>Indicates those object types that should always be excluded from the object drop down on the list view component. This is a comma-seperated list of object API names. Excluded objects have precedence over included objects.</li>
                        <li style="padding-bottom: 5px;"><b>List View Objects - </b>Do not touch this setting unless you know what you are doing!</li>
                        <li style="padding-bottom: 5px;"><b>Allow Automatic Data Refresh - </b>Indicates whether automatic refreshing shold be allowed.</li>
                        <li style="padding-bottom: 5px;"><b>Allow Data Export - </b>Indicates whether data exporting should be allowed.</li>
                        <li style="padding-bottom: 5px;"><b>Display Actions Button - </b>Indicates whether the action drop-down list should be displayed.</li>
                        <li style="padding-bottom: 5px;"><b>Display List View Reprocessing Button - </b>Indicates whether reprocessing of the list view by the user should be allowed.</li>
                        <li style="padding-bottom: 5px;"><b>Display Original List View Button - </b>Indicates whether a button should be displayed allowing the user to go directly to the core list view.</li>
                        <li style="padding-bottom: 5px;"><b>Display Row Count - </b>Indicates whether the row count should be displayed.</li>
                        <li style="padding-bottom: 5px;"><b>Display Selected Count - </b>Indicates whether the count of the selected rows should be displayed.</li>
                        <li style="padding-bottom: 5px;"><b>Allow Inline Editing - </b>Indicates whether inline editing should be available. Note that inline editing is only available for core list views.</li>
                        <li style="padding-bottom: 5px;"><b>Is Initialized - </b>Indicates whether the core list views have been initialized. This setting is auto-populated and should not be altered.</li>
                        <li style="padding-bottom: 5px;"><b>Max Rows Displayed - </b>Indicates the maximum number of rows that any list view should be able to display. Defaulted to 2500.</li>
                        <li style="padding-bottom: 5px;"><b>Display Selected Count - </b>Indicates whether the count of the selected rows should be displayed.</li>
                        <li style="padding-bottom: 5px;"><b>Query Paging Size - </b>Indicates the paging size when data is paged due to large record counts. Defaulted to 250.</li>
                    </ol>
                </div>
            </div>
            <br/><br/>
            <div>
                <b>Component/Page Level Settings</b>
                <br/><br/>
                <p>These settings are maintained as part of the Lightning app that the component is a part of and deal with the look and feel of the Lightning component. They affect all list views displayed on the component in the page and are typically set by a system administrator when a new page is created. The settings are typically dictated by how the page is being used and perhaps what device.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li style="padding-bottom: 5px;"><b>Show Title - </b>Indicates whether the main title on the list view component should be displayed.</li>
                        <li style="padding-bottom: 5px;"><b>Title - </b>Identifies what the title on the component should be if the title is being displayed.</li>
                        <li style="padding-bottom: 5px;"><b>Display Actions - </b>Indicates whether the actions dropdown should be displayed.</li>
                        <li style="padding-bottom: 5px;"><b>Display List View Reprocessing Button - </b>Indicates whether the list view reprocessing button should be displayed. This button allows the user to refresh the list view data based on core list view configuration that may have been changed.</li>
                        <li style="padding-bottom: 5px;"><b>Display Original List View Button - </b>Indicates whether to display the button which links to the original related Salesforce list view. This button allows the user to quickly go to the original list view allowing them to make changes to the list view columns or filters as necessary.</li>
                        <li style="padding-bottom: 5px;"><b>Included Objects - </b>A comma delimited list of API object names that are to be included on the page. If blank, all objects are included. Note that org-wide settings take precedence over these page-level settings.</li>
                        <li style="padding-bottom: 5px;"><b>Excluded Objects - </b>A comma delimited list of API object names that are to be excluded from the page. If blank, no objects are excluded. Note that org-wide settings take precedence over these page-level settings.</li>
                        <li style="padding-bottom: 5px;"><b>Display Row Count - </b>Indicates whether the row count should be displayed.</li>
                        <li style="padding-bottom: 5px;"><b>Display Selected Count - </b>Indicates whether the selected row count should be displayed.</li>
                        <li style="padding-bottom: 5px;"><b>Display Modified Details - </b>Indicates whether the last modified date and user should be displayed.</li>
                        <li style="padding-bottom: 5px;"><b>Allow Data Export - </b>Indicates whether the list view data should be made available for download as a CSV file.</li>
                        <li style="padding-bottom: 5px;"><b>Allow Automatic Data Refresh - </b>Indicates whether the data refresh checkbox should be made available. This checkbox allows the user to automatically have the page data refreshed. Use with caution!</li>
                        <li style="padding-bottom: 5px;"><b>Joined Field Name - </b>The API field name of the field that should be used by this component if it receives ids from another component. If blank, no joining takes place.</li>
                        <li style="padding-bottom: 5px;"><b>Use Message Channel - </b>Indicates whether the component should send messages when records are selected. This value only needs to be false in situations where many list view components are on the same page. If unsure....set to true!</li>
                    </ol>
                </div>
            </div>
            <br/><br/>
            <div>
               <b>List View Configuration</b>
               <br/><br/>
                <p>These settings are maintained in the List View Config tab. These settings affect individual list views in the SFDC org. They are typically created after the list view has been created. Each config has a set of parameters that can be set based on needs.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li style="padding-bottom: 5px;"><b>Additional Fields - </b>Holds the API field names of additional fields that should be displayed in the list view. This is handy for setting fields which might not be available in the standard list view builder. These fields might include lookup fields outside of those available via the standard Salesforce list view builder.</li>
                        <li style="padding-bottom: 5px;"><b>Include All Rows - </b>Indicates whether deleted and archived records should be included in list view results.</li>
                        <li style="padding-bottom: 5px;"><b>Return Size - </b>Indicates the number of rows that should be returned. This value is defaulted to 250. The higher this value, the more page performance will be reduced.</li>
                        <li style="padding-bottom: 5px;"><b>Refresh Rate - </b>Holds the number of seconds between refreshes if the list view can be auto refreshed.</li>
                        <li style="padding-bottom: 5px;"><b>Total Column Names - </b>Indicates the API field names of the columns within the list view that should have a total in the footer.</li>
                        <li style="padding-bottom: 5px;"><b>Total Row Color - </b>The color that the footer row should be displayed in.</li>
                    </ol>
                </div>
                <br/>
                <p>To update a list views settings, select the list view, then click on the cog icon in the top right corner.</p>
            </div>
        </div>
    </lightning-card>
    <br>
    <lightning-card title="Actions" icon-name="standard:invocable_action">
        <div class="slds-var-m-around_medium">
            <p>Actions can be performed against a set of selected records in a list view. Actions can be specific to a type of object or available for all list views. Deleting a record is an example of an action that is available to all list views. Currently 2 actions have been implemented and made available in the app exchange package. Delete and Account Update.</p>
            <br/>
            <p>If an action is needed that is not currently available it can be implemented and then configured. It is highly encouraged to submit actions back to the app exchange package developer for addition in later releases.</p>
            <br/><br/>
            <div>
                <b>Hello World ListViewAction Example</b>
                <br/><br/>
                <p>The following is code which implements the ListViewAction interface -</p>
                <br/><br/>
                <p><code>global with sharing class ListViewActionHelloWorld extends simpli_lv.ListViewAction &#123; <br/>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;/*<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This method is required to implement the ListViewAction interface. If processing is successful the<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* UI component expects the string 'Ok' to be returned. Any other string and the UI component assumes<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* processing has failed and the returned string is used as the error message displayed.<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param recordIds a list of recordIds that have been sent for processing.<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param fieldValues a list of key/value parameters. These parameters are configured.<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;public override String process(List&lt;String&gt; recordIds, Map&lt;String, Object&gt; fieldValues)<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&#123;<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.debug('Hello - ' + (String) fieldValues.get('FirstName') + '. This is where the processing of the records takes place');<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return simpli_lv.ListViewAction.RESULT_OK + ':Hi ' + (String) fieldValues.get('FirstName') + '. The Hello World action was completed successfully';<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&#125;<br/>
                    <br/>
                &#125;<br/></code></p>
            </div>
            <br/>
            <div>
                Note the following -
                <br/><br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li style="padding-bottom: 5px;">the class must be global, otherwise the app will not be able to see it.</li>
                        <li style="padding-bottom: 5px;">the action is performed as a single transaction. All governor limits must be adhered to. If needing to deal with large numbers of records then use the batch interface.</li>
                        <li style="padding-bottom: 5px;">it is suggested to perform processing in an asynchronous way using queueable or batch processing.</li>
                        <li style="padding-bottom: 5px;">always place processing into a try/catch. The UI component will wait for a valid response before displaying anything to the user.</li>
                        <li style="padding-bottom: 5px;">the app looks for the following string at the beginning of the returned result "Ok:". If this string is not found it is assumed the processing has failed and displays the returned string to the user.</li>
                   </ol>
                </div>
            </div>
            <br/><br/>
            <div>
                <b>Action Configuration</b>
                <br/><br/>
                <p>Once the action has been implemented it then needs to be configured for use by the list views. A new List View Actions record must be created. To follow on from the example above the record would look like the following - </p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li style="padding-bottom: 5px;"><b>Label -</b> Hello World</li>
                        <li style="padding-bottom: 5px;"><b>Object Type -</b> (leave blank - this means the action will be available to all object types)</li>
                        <li style="padding-bottom: 5px;"><b>Apex Class Name -</b> ListViewActionHelloWorld</li>
                   </ol>
                </div>
                <br/>
                <p>If there are parameters that need to be returned by the user these need to be configured as well. Using the example above we will create one parameter -</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li style="padding-bottom: 5px;"><b>Label -</b> First Name</li>
                        <li style="padding-bottom: 5px;"><b>Field API Name -</b> FirstName</li>
                        <li style="padding-bottom: 5px;"><b>Display Order -</b> 1</li>
                        <li style="padding-bottom: 5px;"><b>Type -</b> STRING</li>
                        <li style="padding-bottom: 5px;"><b>Default Value -</b> (leave blank)</li>
                        <li style="padding-bottom: 5px;"><b>Placeholder Text -</b> Put your first name here...</li>
                   </ol>
                </div>
            </div>

        </div>
    </lightning-card>

</template>