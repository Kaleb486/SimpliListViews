<!-- sldsValidatorIgnore -->
<!--
  @description       : 
  @author            : tom@ansleyllc.com
  @group             : 
  @last modified on  : 10-26-2021
  @last modified by  : tom.h.ansley@medtronic.com
  Modifications Log 
  Ver   Date         Author                       Modification
  1.0   08-18-2020   tom@ansleyllc.com   Initial Version
  2.0   06-23-2021   tom@ansleyllc.com   Changes to Feature Overview verbage
  3.0   07-28-2021   tom@ansleyllc.com   Changed all strings to labels.
-->
<template>

    <template if:true={spinner}>
        <lightning-spinner alternative-text="Processing"></lightning-spinner>
    </template>

    <!-- ------------------------------------------------------------------------ -->
    <!-- Section which handles the initialization of the list views if its needed -->
    <!-- ------------------------------------------------------------------------ -->
    <lightning-card>
        <template if:false={showProgress}>
            <lightning-layout>
                <lightning-layout-item alignment-bump="right" flexibility="grow" padding="horizontal-small">
                    <div style="padding-left: 10px;">
                        <template if:false={isInitialized}>
                            <lightning-icon icon-name="standard:first_non_empty" 
                                            alternative-text={label.Not_Initialized} 
                                            title={label.Not_Initialized}>
                            </lightning-icon>&nbsp;&nbsp;
                            {label.List_Views_Need_Initialized}  
                        </template>
                        <template if:true={isInitialized}>    
                            <lightning-icon icon-name="standard:task2" 
                                            alternative-text={label.List_Views_Initialized} 
                                            title={label.List_Views_Initialized} >
                            </lightning-icon>&nbsp;&nbsp;
                            {label.List_Views_Initialized}  
                        </template>
                        </div>
                    </lightning-layout-item>
                    <lightning-layout-item padding="horizontal-small" >
                        <lightning-button variant="brand" label={label.Refresh} title={label.Refresh_List_Views} icon-name="action:new_task" class="slds-m-left_x-small" onclick={handleProcessListViewsButtonClick}></lightning-button>
                    </lightning-layout-item>
            </lightning-layout>
        </template>
        <template if:true={showProgress}>
            <c-simpli-u-i-list-views-init-progress-bar batch-id={batchId}
                                                        working-text={label.Processing_Status}
                                                        complete-text={label.List_View_Processing_Complete}>
            </c-simpli-u-i-list-views-init-progress-bar>
        </template>
    </lightning-card>
    
    <br/>

    <lightning-card title={label.Feature_Overview} icon-name="standard:announcement">
        <div class="slds-var-m-around_medium">
            <div style="padding-left: 20px;">
                <ol style="list-style-type:circle; list-style-position: inside;">
                    <li style="padding-bottom: 5px;">List views for all objects on one page</li>
                    <li style="padding-bottom: 5px;">Lists up to 2500 records allowed</li>
                    <li style="padding-bottom: 5px;">Include fields from lookup objects in list view (and fields of lookups of lookups!)</li>
                    <li style="padding-bottom: 5px;">Create list views based on complex SOQL query's</li>
                    <li style="padding-bottom: 5px;">Create actions to process multiple records in list view using batch apex, atuomated or screen flows</li>
                    <li style="padding-bottom: 5px;">Inline editing</li>
                    <li style="padding-bottom: 5px;">Pin your favorite list view</li>
                    <li style="padding-bottom: 5px;">Multiple column sorting</li>
                    <li style="padding-bottom: 5px;">Footer calculations</li>
                    <li style="padding-bottom: 5px;">Row highlighting based on criteria</li>
                    <li style="padding-bottom: 5px;">Auto-refresh at configured intervals</li>
                    <li style="padding-bottom: 5px;">Export list view data with the click of a button</li>
                    <li style="padding-bottom: 5px;">Include deleted records in list view (records show in red)</li>
                    <li style="padding-bottom: 5px;">Configure the list view page at the org, component and list view level</li>
                    <li style="padding-bottom: 5px;">Create list views from Tooling API</li>
                </ol>
            </div>
        </div>
    </lightning-card>
    <br/>
    <lightning-card title={label.Quick_Start} icon-name="standard:custom_notification">
        <div class="slds-var-m-around_medium">
            <div style="padding-left: 20px;">
                <ol style="list-style-type:decimal; list-style-position: inside;">
                    <li style="padding-bottom: 5px;"><b>Initialize List Views - </b>Click the refresh button above to process the list views if they have not been initialized.</li>
                    <li style="padding-bottom: 5px;"><b>Go To Simpli List Views Examples App - </b>The home tab will be the "Everything Example" tab. The objects and list views will be displayed.</li>
                </ol>
            </div>
        </div>
    </lightning-card>
    <br/>
    <lightning-card title={label.Issues_And_Questions} icon-name="standard:custom_notification">
        <div style="padding-left: 20px;" class="slds-var-m-around_medium">
            <p>FAQs - <a target="_blank" href="https://github.com/tomansley/SimpliListViews/wiki/FAQ">go here</a></p>
            <br/>
            <p>If you have any issues, questions or ideas please go to the <a target="_blank" href="https://github.com/tomansley/SimpliListViews">github repository</a> to log them - </p>
            <br/>
            <p>Other resources - </p>
            <br/>
            <div style="padding-left: 20px;">
                <ol style="list-style-type:circle; list-style-position: inside;">
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=deoNfudkpEw">Features Overview (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=PIzyrWuc1YA">Install Guide (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=bJQchWEK34I">Starting Out (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=Uqur5RiKwU0">Sizing and Sorting (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=nJyTWEPCUac">Using Multiple Components On One Page (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=OLLpIvXqfWc">Creating Custom List View (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=9eHD7ntFFs0">Large Datasets and Paging (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=SNDSkBCQR8Y">Page Modes (Video)</a></li>
                    <li style="padding-bottom: 5px;"><a target="_blank" href="https://www.youtube.com/watch?v=n29zVvM6Xtk">Actions (Video)</a></li>
                </ol>
            </div>
        </div>
    </lightning-card>
    <br/>
    <lightning-card title={label.Configuration} icon-name="standard:settings">
        <div class="slds-var-m-around_medium">

            <p>There are 4 different levels of configuration that are available. Note that where a setting is available in different levels the org-wide overrides the component and list view settings.</p>
            <br/>
            <div style="padding-left: 20px;">
                <ol style="list-style-type:circle; list-style-position: inside;">
                    <li style="padding-bottom: 5px;">Org-wide custom settings</li>
                    <li style="padding-bottom: 5px;">Component or page level settings</li>
                    <li style="padding-bottom: 5px;">List view settings</li>
                    <li style="padding-bottom: 5px;">User settings</li>
                </ol>
            </div>
            <br/>
            <div>
                <b>Org-Wide Custom Settings</b>
                <br/><br/>
                <p>These settings are maintained in the Simpli List Views Admin App on the List Views Admin tab. They affect all Simpli list views displayed in the SFDC org and are typically set by a system administrator at initial setup.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <template for:each={orgWideDescs} for:item="description">
                            <li key={description.name} style="padding-bottom: 5px;"><b>{description.label} - </b>{description.description}</li>
                        </template>
                    </ol>
                </div>
            </div>
            <br/><br/>
            <div>
                <b>Component/Page Level Settings</b>
                <br/><br/>
                <p>These settings are maintained as part of the Lightning app that the component is a part of and deal with the look and feel of the Lightning component. They affect all list views displayed on the component in the page and are typically set by a system administrator when a new page is created. The settings are typically dictated by how the page is being used and perhaps what device.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <template for:each={compDescs} for:item="description">
                            <li key={description.name} style="padding-bottom: 5px;"><b>{description.label} - </b>{description.description}</li>
                        </template>
                    </ol>
                </div>
            </div>
            <br/><br/>
            <div>
               <b>List View Settings</b>
               <br/><br/>
                <p>These settings are maintained by clicking on the cog icon when a list view is being displayed. They affect individual Simpli list views for a specific page and are typically created after the list view has been created.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <template for:each={listViewDescs} for:item="description">
                            <li key={description.name} style="padding-bottom: 5px;"><b>{description.label} - </b>{description.description}</li>
                        </template>
                    </ol>
                </div>
                <br/>
                <p>To update a list views setting, select the list view, then click on the cog icon in the top right corner.</p>
            </div>
            <br/><br/>
            <div>
               <b>User Settings</b>
               <br/><br/>
                <p>These settings are maintained per user, for each user that has access to a page or component. The settings are configured based on the action performed by the user. For example, if the user pins a given list view for the page that information will be saved for that user, for that page.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li style="padding-bottom: 5px;"><b>Sort Order - </b>Indicates the sort order that the user has selected for a given list view for a given page.</li>
                        <li style="padding-bottom: 5px;"><b>Pinned List View - </b>Identifies the list view that will automatically be displayed when the page is refreshed or initialized.</li>
                    </ol>
                </div>
                <br/>
                <p>These settings are maintained by the Simpli List View app and should not under normal circumstances be changed by an admin.</p>
            </div>
        </div>
    </lightning-card>
    <br>
    <lightning-card title="Actions" icon-name="standard:invocable_action">
        <div class="slds-var-m-around_medium">
            <p>Actions can be performed against a set of selected records in a list view. Actions can be specific to a type of object or available for all list views. Deleting a record is an example of an action that is available to all list views. There are currently 8 actions that have been implemented and made available in the app exchange package.</p>
            <br/>
            <div style="padding-left: 20px;">
                <ol style="list-style-type:disc; list-style-position: inside;">
                    <li style="padding-bottom: 5px;"><b>New - </b>create a new record (record type based on currently selected list view)</li>
                    <li style="padding-bottom: 5px;"><b>Edit - </b>edits the currently selected record</li>
                    <li style="padding-bottom: 5px;"><b>Edit All - </b>sets all records currently visible on the component to inline editing. Can only be used for list views of 100 records or less</li>
                    <li style="padding-bottom: 5px;"><b>Clone - </b>clones the currently selected record</li>
                    <li style="padding-bottom: 5px;"><b>Delete - </b>deletes all records that are selected</li>
                    <li style="padding-bottom: 5px;"><b>Send Email - </b>allows for the sending of emails to the chosen records. The email address is taken from a field on the record. This field is found based on the following precedence -</li>
                    <div style="padding-left: 40px;">
                        <ol style="list-style-type:lower-roman; list-style-position: inside;">
                            <li style="padding-bottom: 5px;">configured on the action</li>
                            <li style="padding-bottom: 5px;">does the object have a field called Email</li>
                            <li style="padding-bottom: 5px;">does the object have a field called Email__c</li>
                        </ol>
                    </div>
                    <li style="padding-bottom: 5px;"><b>Update - </b>an example action which accepts two user entered fields and updates all selected records based on the input. (Account object only)</li>
                    <li style="padding-bottom: 5px;"><b>Set Close Lost - </b>an example action which marks all selected records as Close - Lost. (Opportunity object only)</li>
                    <li style="padding-bottom: 5px;"><b>Go To A Cool App - </b>an example hyperlink which opens a new browser window/tab and takes the user to the configured URL. (List View object only)</li>
                </ol>
            </div>
            <br/>
            <p>If an action is needed that is not currently available it can be implemented and then configured. It is highly encouraged to submit actions back to the app exchange package developer for addition in later releases.</p>
            <br/><br/>
            <div>
                <b>Hello World ListViewAction Example</b>
                <br/><br/>
                <p>The following is code which implements the ListViewAction interface -</p>
                <br/><br/>
                <p><code>global with sharing class ListViewActionHelloWorld extends simpli_lv.ListViewAction &#123; <br/>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;/*<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This method is required to implement the ListViewAction interface. If processing is successful the<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* UI component expects the string 'Ok' to be returned. Any other string and the UI component assumes<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* processing has failed and the returned string is used as the error message displayed.<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param recordIds a list of recordIds that have been sent for processing.<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param fieldValues a list of key/value parameters. These parameters are configured.<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;public override String process(List&lt;String&gt; recordIds, Map&lt;String, Object&gt; fieldValues)<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&#123;<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.debug('Hello - ' + (String) fieldValues.get('FirstName') + '. This is where the processing of the records takes place');<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return simpli_lv.ListViewAction.RESULT_OK + ':Hi ' + (String) fieldValues.get('FirstName') + '. The Hello World action was completed successfully';<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&#125;<br/>
                    <br/>
                &#125;<br/></code></p>
            </div>
            <br/>
            <div>
                Note the following -
                <br/><br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li style="padding-bottom: 5px;">the class must be global, otherwise the app will not be able to see it.</li>
                        <li style="padding-bottom: 5px;">the action is performed as a single transaction. All governor limits must be adhered to. If needing to deal with large numbers of records then use the batch interface.</li>
                        <li style="padding-bottom: 5px;">it is suggested to perform processing in an asynchronous way using queueable or batch processing.</li>
                        <li style="padding-bottom: 5px;">always place processing into a try/catch. The UI component will wait for a valid response before displaying anything to the user.</li>
                        <li style="padding-bottom: 5px;">the app looks for the following string at the beginning of the returned result "Ok:". If this string is not found it is assumed the processing has failed and displays the returned string to the user.</li>
                   </ol>
                </div>
            </div>
            <br/><br/>
            <div>
                <b>Action Configuration</b>
                <br/><br/>
                <p>Once the action has been implemented it then needs to be configured for use by the list views. A new List View Actions record must be created. To follow on from the example above the record would look like the following - </p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li style="padding-bottom: 5px;"><b>Label -</b> Hello World</li>
                        <li style="padding-bottom: 5px;"><b>Object Type -</b> (leave blank - this means the action will be available to all object types)</li>
                        <li style="padding-bottom: 5px;"><b>Apex Class Name -</b> ListViewActionHelloWorld</li>
                   </ol>
                </div>
                <br/>
                <p>If there are parameters that need to be returned by the user these need to be configured as well. Using the example above we will create one parameter -</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li style="padding-bottom: 5px;"><b>Label -</b> First Name</li>
                        <li style="padding-bottom: 5px;"><b>Field API Name -</b> FirstName</li>
                        <li style="padding-bottom: 5px;"><b>Display Order -</b> 1</li>
                        <li style="padding-bottom: 5px;"><b>Type -</b> STRING</li>
                        <li style="padding-bottom: 5px;"><b>Default Value -</b> (leave blank)</li>
                        <li style="padding-bottom: 5px;"><b>Placeholder Text -</b> Put your first name here...</li>
                   </ol>
                </div>
            </div>

        </div>
    </lightning-card>

</template>