<template>

    <template if:false={isInit}>
        <lightning-card>
                <template if:false={showProgress}>
                    <div style="padding-left: 10px;">
                        <lightning-icon icon-name="standard:first_non_empty" 
                                        alternative-text="List Views Not Initialized" 
                                        title="List Views Not Initialized">
                        </lightning-icon>&nbsp;&nbsp;
                        List views must be initialized. Click  
                        <lightning-button-icon style="padding: 10px;" title="Process List Views" 
                            size="small" 
                            icon-name="action:new_task" 
                            onclick={handleProcessListViewsButtonClick}>
                        </lightning-button-icon>
                        to process the list views.
                    </div>
                </template>
                <template if:true={showProgress}>
                    <c-simpli-u-i-list-views-init-progress-bar batch-id={batchId}
                                                               working-text="List views initializing..."
                                                               complete-text="List views have been initialized!">
                    </c-simpli-u-i-list-views-init-progress-bar>
                </template>
        </lightning-card>
        <br/>
    </template>
    <lightning-card title="Feature Overview" icon-name="standard:announcement">
        <div class="slds-m-around_medium">
            <div style="padding-left: 20px;">
                <ol style="list-style-type:circle; list-style-position: inside;">
                    <li>Reduce number of clicks</li>
                    <li>Customize list view fields beyond standard list view field options</li>
                    <li>Create custom list view actions</li>
                    <li>Configure the list view page at the org, page and list view level</li>
                </ol>
            </div>
            <br/>
            <p>Users spend lots of time working with lists of data. In Salesforce those lists are spread throughout the application. Depending on user process, this can create unnecessary clicks and page loads. Simpli List Views helps reduce the clicks a user needs when moving from one object list view to another. All list views are displayed on one page.</p>
            <br/>
            <p>Salesforce list views could also do with a spruce-up! Ever needed to look deeper into an object hierarchy? Now you can. Move beyond standard list views and add deeper hierarchical custom fields that reference objects multiple levels deeper. For example, on an Account list view you could see the account owners profile by using Owner.Profile.Name in the list views configuration.</p>
             <br/> 
            <p>And since you have decided to use Simpli List Views and plan on spending all your time using it, you can create actions for list views (requires Apex development). Select records that need to be processed and choose an action. Actions can be universal (to delete records), object specific (to update object fields) or list view specific (process oriented action). Actions can be configured to have users enter data before processing the action.</p>
        </div>
    </lightning-card>
    <br/>
    <lightning-card title="Configuration" icon-name="standard:announcement">
        <div class="slds-m-around_medium">

            <p>There are 3 different levels of configuration that are available.</p>
            <br/>
            <div style="padding-left: 20px;">
                <ol style="list-style-type:circle; list-style-position: inside;">
                    <li>Org-wide custom settings</li>
                    <li>Component or page level settings</li>
                    <li>List view configuration</li>
                </ol>
            </div>
            <br/>
            <div>
                <b>Org-Wide Custom Settings</b>
                <br/><br/>
                <p>These settings are maintained in the "List View Org Wide Setting" custom metadata type in the org setup. They affect all list views displayed in the SFDC org and are typically set by a system administrator at initial setup.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li><b>Included Object Types - </b>Indicates only those object types that should be included in the object drop down on the list view component. This is a comma-seperated list of object API names. Note that if this value is blank ALL object types are included by default.</li>
                        <li><b>Excluded Object Types - </b>Indicates those object types that should always be excluded from the object drop down on the list view component. This is a comma-seperated list of object API names. Excluded objects have precedence over included objects.</li>
                    </ol>
                </div>
            </div>
            <br/><br/>
            <div>
                <b>Component/Page Level Settings</b>
                <br/><br/>
                <p>These settings are maintained as part of the Lightning app that the component is a part of and deal with the look and feel of the Lightning component. They affect all list views displayed on the component in the page and are typically set by a system administrator when a new page is created. The settings are typically dictated by how the page is being used and perhaps what device.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li><b>Has Main Title - </b>Indicates whether the main title on the list view component should be displayed.</li>
                        <li><b>Main Title - </b>Identifies what the title on the component should be if the title is being displayed.</li>
                        <li><b>Display Actions - </b>Indicates whether the actions dropdown should be displayed.</li>
                        <li><b>Display List View Reprocessing Button - </b>Indicates whether the list view reprocessing button should be displayed. This button allows the user to refresh the list view data based on core list view configuration that may have been changed.</li>
                        <li><b>Display Original List View Button - </b>Indicates whether to display the button which links to the original related Salesforce list view. This button allows the user to quickly go to the original list view allowing them to make changes to the list view columns or filters as necessary.</li>
                        <li><b>Included Objects - </b>A comma delimited list of API object names that are to be included on the page. If blank, all objects are included. Note that org-wide settings take precedence over these page-level settings.</li>
                        <li><b>Excluded Objects - </b>A comma delimited list of API object names that are to be excluded from the page. If blank, no objects are excluded. Note that org-wide settings take precedence over these page-level settings.</li>
                    </ol>
                </div>
            </div>
            <br/><br/>
            <div>
               <b>List View Configuration</b>
               <br/><br/>
                <p>These settings affect individual list views in the SFDC org. They are typically created after the list view has been created. The settings are found in the List View Configs object. Each config has a set of parameters that can be set based on needs.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li><b>AdditionalFields - </b>Holds the API field names of additional fields that should be displayed in the list view. This is handy for setting fields which might not be available in the standard list view builder. These fields might include lookup fields outside of those available via the standard Salesforce list view builder.</li>
                        <li><b>ReturnSize - </b>Indicates the number of rows that should be returned. This value is defaulted to 250. The higher this value, the more page performance will be reduced.</li>
                    </ol>
                </div>
                <br/>
                <p>To create list view settings create a new record on the List View Configs object with the following properties.</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li><b>List View API Name - </b>The API Name of the list view the settings are for.</li>
                        <li><b>List View Object - </b>The API Name of the object that the list view is associated with.</li>
                    </ol>
                </div>
                <br/>
                <p>Once the main config record has been created parameters for that config can be set.</p>
            </div>
        </div>
    </lightning-card>
    <br>
    <lightning-card title="Actions" icon-name="standard:announcement">
        <div class="slds-m-around_medium">
            <p>Actions can be performed against a set of selected records in a list view. Actions can be specific to a type of object or available for all list views. Deleting a record is an example of an action that is available to all list views. Currently 2 actions have been implemented and made available in the app exchange package. Delete and Account Update.</p>
            <br/>
            <p>If an action is needed that is not currently available it can be implemented and then configured. It is highly encouraged to submit actions back to the app exchange package developer for addition in later releases.</p>
            <br/><br/>
            <div>
                <b>Hello World ListViewAction Example</b>
                <br/><br/>
                <p>The following is code which implements the ListViewAction interface -</p>
                <br/><br/>
                <p><code>global with sharing class ListViewActionHelloWorld extends simpli_lv.ListViewAction &#123; <br/>
                    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;/*<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* This method is required to implement the ListViewAction interface. If processing is successful the<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* UI component expects the string 'Ok' to be returned. Any other string and the UI component assumes<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* processing has failed and the returned string is used as the error message displayed.<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param recordIds a list of recordIds that have been sent for processing.<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* @param fieldValues a list of key/value parameters. These parameters are configured.<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;public override String process(List&lt;String&gt; recordIds, Map&lt;String, Object&gt; fieldValues)<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&#123;<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.debug('Hello - ' + (String) fieldValues.get('FirstName') + '. This is where the processing of the records takes place');<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;    <br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return simpli_lv.ListViewAction.RESULT_OK;<br/>
                    &nbsp;&nbsp;&nbsp;&nbsp;&#125;<br/>
                    <br/>
                &#125;<br/></code></p>
            </div>
            <br/>
            <div>
                Note the following -
                <br/><br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li>the class must be global, otherwise the app will not be able to see it.</li>
                        <li>the action is performed as a single transaction. All governor limits must be adhered to. If needing to deal with large numbers of records then use the batch interface.</li>
                        <li>always place processing into a try/catch. The UI component will wait for a valid response before displaying anything to the user.</li>
                   </ol>
                </div>
            </div>
            <br/><br/>
            <div>
                <b>Action Configuration</b>
                <br/><br/>
                <p>Once the action has been implemented it then needs to be configured for use by the list views. A new List View Actions record must be created. To follow on from the example above the record would look like the following - </p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li><b>Label -</b> Hello World</li>
                        <li><b>Object Type -</b> (leave blank - this means the action will be available to all object types)</li>
                        <li><b>Apex Class Name -</b> ListViewActionHelloWorld</li>
                   </ol>
                </div>
                <br/>
                <p>If there are parameters that need to be returned by the user these need to be configured as well. Using the example above we will create one parameter -</p>
                <br/>
                <div style="padding-left: 20px;">
                    <ol style="list-style-type:decimal; list-style-position: inside;">
                        <li><b>Label -</b> First Name</li>
                        <li><b>Field API Name -</b> FirstName</li>
                        <li><b>Display Order -</b> 1</li>
                        <li><b>Type -</b> STRING</li>
                        <li><b>Default Value -</b> (leave blank)</li>
                        <li><b>Placeholder Text -</b> Put your first name here...</li>
                   </ol>
                </div>
            </div>

        </div>
    </lightning-card>

</template>